import{_ as s,c as i,G as a,b as n}from"./chunks/framework.D5KJDRhN.js";const l=JSON.parse('{"title":"6 åŸºç¡€ç¯‡ï½œæŒæ¡æœ€ç‹¬ç‰¹çš„æ•°æ®ç±»å‹ï¼šSymbol","description":"","frontmatter":{"title":"6 åŸºç¡€ç¯‡ï½œæŒæ¡æœ€ç‹¬ç‰¹çš„æ•°æ®ç±»å‹ï¼šSymbol","date":"2025-02-22T00:00:00.000Z","categories":["JavaScript è¯­è¨€ç¼–ç¨‹è¿›é˜¶"],"head":[["link",{"rel":"canonical","href":"https://www.doit.ip-ddns.com/pages/repository/ç¼–ç¨‹/JavaScript è¯­è¨€ç¼–ç¨‹è¿›é˜¶/6 åŸºç¡€ç¯‡ï½œæŒæ¡æœ€ç‹¬ç‰¹çš„æ•°æ®ç±»å‹ï¼šSymbol"}]]},"headers":[],"relativePath":"pages/repository/ç¼–ç¨‹/JavaScript è¯­è¨€ç¼–ç¨‹è¿›é˜¶/6 åŸºç¡€ç¯‡ï½œæŒæ¡æœ€ç‹¬ç‰¹çš„æ•°æ®ç±»å‹ï¼šSymbol.md","filePath":"pages/repository/ç¼–ç¨‹/JavaScript è¯­è¨€ç¼–ç¨‹è¿›é˜¶/6 åŸºç¡€ç¯‡ï½œæŒæ¡æœ€ç‹¬ç‰¹çš„æ•°æ®ç±»å‹ï¼šSymbol.md","lastUpdated":1740213738000}');const e=s({name:"pages/repository/ç¼–ç¨‹/JavaScript è¯­è¨€ç¼–ç¨‹è¿›é˜¶/6 åŸºç¡€ç¯‡ï½œæŒæ¡æœ€ç‹¬ç‰¹çš„æ•°æ®ç±»å‹ï¼šSymbol.md"},[["render",function(s,l,e,p,t,h){return n(),i("div",null,l[0]||(l[0]=[a('<p>å‰é¢è®²åˆ°çš„ String ç±»å‹å¯ä»¥ä½œä¸ºå¯¹è±¡çš„ keyï¼Œä»Šå¤©æˆ‘ä»¬æ¥å­¦ä¹ å¦ä¸€ä¸ªå¯ä»¥ä½œä¸º key çš„ç±»å‹ï¼Œå°±æ˜¯ <code>Symbol</code>ã€‚</p><p><code>Symbol</code> æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥æ¯”è¾ƒå¥‡æ€ªçš„ Primitive ç±»å‹ï¼Œä¸ºä»€ä¹ˆè¿™æ ·è¯´å‘¢ï¼Ÿè¯•é—®å¦‚æœæœ‰ JavaScript ä»£ç æ»¡è¶³ä»¥ä¸‹ç­‰å¼ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">A</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> A</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>A æ˜¯ Primitive ç±»å‹çš„å˜é‡æˆ–è€…æ„é€ è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p><strong>NaN</strong> è‚¯å®šæ˜¯ä¸€ä¸ªç­”æ¡ˆï¼Œä» ES6 å¼€å§‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ–°çš„é€‰é¡¹ï¼Œå³ <code>Symbol() !== Symbol()</code>ã€‚</p><p><strong>Symbolï¼ˆç¬¦å·ï¼‰ç”¨æ¥ç”Ÿæˆå”¯ä¸€çš„å€¼ï¼Œç¡®ä¿æ¯æ¬¡è°ƒç”¨ç»“æœä¸ä¼šé‡å¤</strong>ã€‚è¿™ä¸ªç‰¹æ€§å¯ä»¥ç”¨åœ¨å¾ˆå¤šåœºæ™¯ï¼Œæœ‰ç‚¹ç±»ä¼¼äºä¹‹å‰æˆ‘ä»¬ç”¨ Math.random() æˆ–è€… md5 ç”Ÿæˆå”¯ä¸€ keyï¼Œä½†è¿™äº›åŸºäºå­—ç¬¦ä¸²çš„æ–¹å¼éƒ½å­˜åœ¨å†²çªçš„å¯èƒ½ï¼Œæ¯æ¬¡å®ç°èµ·æ¥ä¹Ÿç•¥æœ‰éº»çƒ¦ï¼Œ<code>Symbol</code> è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><p>Symbol é™¤äº†å¯ä»¥è®©ä½ ç”Ÿæˆå”¯ä¸€å€¼ä»¥å¤–ï¼Œè¿˜å®šä¹‰äº†è®¸å¤šå†…ç½®å¸¸é‡å€¼ï¼Œå½±å“åˆ°äº†å¯¹è±¡ã€å­—ç¬¦ä¸²ã€æ­£åˆ™ç­‰ç­‰çš„å¾ˆå¤šè¡Œä¸ºï¼Œå¯ä»¥è¯´æ˜¯è‡³å…³é‡è¦ã€‚</p><p>æœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬å°±å…ˆæ¥äº†è§£ Symbol å˜é‡æœ¬èº«çš„æ„é€ ã€æ¯”è¾ƒã€ç±»å‹è½¬æ¢ï¼Œå†æ¥äº†è§£éƒ¨åˆ†å†…ç½®å¸¸é‡å€¼çš„ä½œç”¨ï¼Œèƒ½å¤Ÿè®©å¤§å®¶åœ¨æ—¥åçš„å¼€å‘è¿‡ç¨‹ä¸­å……åˆ†å‘æŒ¥ Symbol çš„ä»·å€¼ã€‚</p><h2 id="symbol-åˆ›å»º" tabindex="-1">Symbol åˆ›å»º <a class="header-anchor" href="#symbol-åˆ›å»º" aria-label="Permalink to &quot;Symbol åˆ›å»º&quot;">â€‹</a></h2><p>Symbol ç±»å‹å¯ä»¥ç”± <code>Symbol()</code> å‡½æ•°æˆ–è€… <code>Symbol.for()</code> å‡½æ•°æ„é€ å‡ºæ¥ã€‚</p><p><code>Symbol()</code> æ¯æ¬¡æ„é€ å‡ºä¸€ä¸ªæ–°çš„å˜é‡ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª key å‚æ•°ï¼Œè¿™æ ·åœ¨æ˜¾å¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶æ›´æ–¹ä¾¿è¾¨è®¤ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;Symbol(foo)&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç”±äºæ¯æ¬¡è°ƒç”¨éƒ½æ˜¯è¿”å›æ–°å€¼ï¼Œå› æ­¤ä½ ä¸€æ—¦ä¸¢å¤±äº†å¯¹å…¶çš„å¼•ç”¨ï¼Œå°±ä¸å®¹æ˜“æ‰¾å›æ¥äº†ã€‚æ¯”å¦‚åƒä¸‹é¢è¿™æ ·ï¼Œå°±åªèƒ½é€šè¿‡éå†æ¥æ‰¾äº†ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> person</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">person[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Mike&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸è¿‡å³ä¾¿æ˜¯ <code>for...in</code> éå†ï¼Œä¹Ÿæ‰¾ä¸åˆ°ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> person) console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ‰¾ä¸åˆ°</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>åƒ <code>Object.keys()</code>ã€<code>Object.entries()</code>ã€<code>Object.getOwnPropertyNames()</code>ï¼Œä¹Ÿéƒ½éå†ä¸åˆ°ï¼Œåªæœ‰ <code>Object.getOwnPropertySymbols()</code> å¯ä»¥ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOwnPropertySymbols</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Symbol(name)]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¦‚æœä½ å¸Œæœ›å¯ä»¥è½»æ˜“åœ°æ‰¾å›å·²ç»åˆ›å»ºè¿‡çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ <code>Symbol.for(key)</code> æ–¹æ³•ã€‚<strong>Symbol åœ¨å…¨å±€ä¼šæœ‰ä¸€ä¸ªæ³¨å†Œè¡¨ï¼Œ<code>Symbol.for(key)</code> ä¼šå…ˆå»æ³¨å†Œè¡¨ä¸­æŸ¥æ‰¾æœ‰æ— å·²ç»åˆ›å»ºè¿‡çš„ç›¸åŒ key çš„ Symbolï¼Œå¦‚æœæœ‰ï¼Œåˆ™è¿”å›ï¼Œæ²¡æœ‰åˆ™åˆ›å»º</strong>ã€‚</p><p>æ‰€ä»¥ï¼Œ<code>Symbol.for(key)</code> çš„è¡Œä¸ºæ˜¯è¿™æ ·çš„ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Symbol.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Symbol.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è™½ç„¶å–å›æ›´ç®€å•ï¼Œä½†æ˜¯è¿™æ ·åˆ›å»ºçš„ Symbol å·²ç»å’Œå­—ç¬¦ä¸²æ²¡æœ‰ä»€ä¹ˆåˆ†åˆ«ï¼škey å†²çªï¼Œåˆ™ Symbol å€¼ä¹Ÿå†²çªã€‚</p><p>å¯¹äº <code>Symbol.for(key)</code> åˆ›å»ºçš„å€¼ï¼Œå¯ä»¥é€šè¿‡ <code>Symbol.keyFor(symbol)</code> æ¥è·å– keyï¼Œä½†æ˜¯æ³¨æ„ <code>Symbol(key)</code> åˆ›å»ºçš„å´ä¸å¯ä»¥ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Symbol.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keyFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Symbol.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;foo&quot;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Symbol.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keyFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// undefined</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>Symbol çš„å¦ä¸€ç‰¹æ®Šä¹‹å¤„åœ¨äºå®ƒä¸å…è®¸éšå¼è½¬æ¢ä¸º String æˆ– Numberï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âŒ Uncaught TypeError: Cannot convert a Symbol value to a number</span></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âŒ Uncaught TypeError: Cannot convert a Symbol value to a string</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å¦‚æœä½ è¿˜æ˜¯æƒ³è½¬æˆå­—ç¬¦ä¸²çš„è¯ï¼Œæ¯”å¦‚æ‰“å°çš„åœºæ™¯ï¼Œå¯ä»¥æœ‰ä¸¤ç§åŠæ³•ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;Symbol(foo)&quot;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;Symbol(foo)&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å‰è€…å¯èƒ½æ›´é€šç”¨ä¸€äº›ï¼Œèƒ½å…¼å®¹ nullã€undefined ç­‰ç©ºå€¼ã€‚</p><blockquote><p>ğŸ’¡ Symbol è½¬æ¢æˆ Number æ˜¯æ²¡æœ‰åŠæ³•çš„ï¼Œå› æ­¤ç¡®ä¿ Symbol å€¼ä¸ä¼šè¿›å…¥æ•°å­¦è®¡ç®—ä¸­ã€‚</p></blockquote><h2 id="å¸¸è§-symbol-å€¼" tabindex="-1">å¸¸è§ Symbol å€¼ <a class="header-anchor" href="#å¸¸è§-symbol-å€¼" aria-label="Permalink to &quot;å¸¸è§ Symbol å€¼&quot;">â€‹</a></h2><p>Symbol ä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¸Šé¢æºå¸¦äº†å¥½å¤šé™æ€å¸¸é‡ï¼ŒåŒ…æ‹¬ <code>Symbol.hasInstance</code>ã€<code>Symbol.isConcatSpreadable</code>ã€<code>Symbol.iterator</code>ã€<code>Symbol.asyncIterator</code>ã€<code>Symbol.match</code>ã€<code>Symbol.matchAll</code>ã€<code>Symbol.replace</code>ã€<code>Symbol.search</code>ã€<code>Symbol.species</code>ã€<code>Symbol.split</code>ã€<code>Symbol.toPrimitive</code>ã€<code>Symbol.toStringTag</code>ã€<code>Symbol.unscopables</code>ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬æ¥äº†è§£å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä½™ä¸‹çš„åœ¨åç»­çš„ç« èŠ‚ä¸­ä¹Ÿéƒ½æœ‰æ¶‰åŠã€‚</p><h3 id="symbol-match-matchall-replace-search-split" tabindex="-1">Symbol.match/matchAll/replace/search/split <a class="header-anchor" href="#symbol-match-matchall-replace-search-split" aria-label="Permalink to &quot;Symbol.match/matchAll/replace/search/split&quot;">â€‹</a></h3><p>ä»åå­—ä¸Šå°±èƒ½çœ‹å‡ºæ¥ï¼Œè¿™äº›å€¼è‚¯å®šå’Œå­—ç¬¦ä¸²çš„æ­£åˆ™æ“ä½œæœ‰å…³ã€‚åœ¨å‰é¢ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†åœ¨ä¸åŒçš„éœ€æ±‚ä¸‹å¦‚ä½•é€‰æ‹©æœ€åˆé€‚çš„ APIã€‚</p><p>å…ˆæ˜¯æœç´¢ï¼Œåˆ¤æ–­æœ‰æ— åŒ¹é…ï¼Œé™¤äº† RegExp çš„ test å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ String çš„ <code>search</code>ï¼Œä¼ å…¥ä¸€ä¸ªæ­£åˆ™ã€‚</p><p>äº‹å®ä¸Šï¼Œé™¤äº†æ­£åˆ™ä»¥å¤–ï¼Œsearch ä¹Ÿå¯ä»¥ä¼ å…¥è‡ªå®šä¹‰å¯¹è±¡ï¼Œåªéœ€è¦è¿™ä¸ªå¯¹è±¡å†…ç½®äº† <code>[Symbol.search]</code> å‡½æ•°ï¼Œæ¯”å¦‚ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> customReg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [Symbol.search](</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> str.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name);</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;barfoo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">search</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(customReg)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä¸¾ä¸€åä¸‰ï¼Œå…¶ä½™çš„ Symbol ä¹Ÿæ˜¯è¿™ä¸ªç”¨æ³•ï¼Œä½†æ˜¯å¤§å®¶éœ€è¦æ³¨æ„ï¼š<strong>ECMAScript å¹¶æ²¡æœ‰çº¦æŸè¿™ä¸ªæˆå‘˜å‡½æ•°çš„è¿”å›å€¼ç±»å‹</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œsearch å¯ä»¥ä¸è¿”å›æ•°å­—ï¼Œmatch å¯ä»¥ä¸è¿”å›æ•°ç»„ï¼ŒmatchAll ä¹Ÿå¯ä»¥ä¸è¿”å›è¿­ä»£å™¨ã€‚</p><p>æ˜¾ç„¶ä¸å»ºè®®è¿™æ ·åšï¼ŒTypeScript å¯¹æ­¤åšå‡ºäº†ç±»å‹çº¦æŸï¼Œä¾‹å¦‚å¯¹äº search å‡½æ•°ï¼š</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">search</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(regexp: string </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RegExp): number;</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//                                                   â¬‡ï¸â¬‡ï¸ å¿…é¡»è¿”å› number</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">search</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(searcher: { [Symbol.search](</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }): number;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>äº‹å®ä¸Šï¼Œæˆ‘è®¤ä¸ºè¿™ä¸ªå®šä¹‰å¹¶ä¸èƒ½å‡†ç¡®åæ˜  ECMAScript çš„æ ‡å‡†è§„èŒƒï¼Œè§„èŒƒé‡Œ String çš„ searchã€matchã€matchAllã€replaceã€replaceAllã€split æ–¹æ³•å¹¶æ²¡æœ‰åˆ»æ„å»åˆ¤æ–­å®ƒçš„å‚æ•°å¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ª RegExpï¼Œåªæ˜¯çœ‹å®ƒæœ‰æ—  <code>[Symbol.search]</code>ã€<code>[Symbol.match]</code> ç­‰å±æ€§ã€‚RegExp å¯¹è±¡ä½œä¸ºåˆæ³•çš„ä¼ å…¥å‚æ•°ï¼Œå®ƒä¸Šé¢è‡ªç„¶ä¹Ÿæºå¸¦äº†å¯¹åº” Symbol å±æ€§çš„å®šä¹‰ï¼Œåªä¸è¿‡åœ¨åŸå‹ä¸Šï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RegExp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[Symbol.search]</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RegExp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[Symbol.match]</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RegExp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[Symbol.matchAll]</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RegExp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[Symbol.replace]</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RegExp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[Symbol.split]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="symbol-hasinstance" tabindex="-1">Symbol.hasInstance <a class="header-anchor" href="#symbol-hasinstance" aria-label="Permalink to &quot;Symbol.hasInstance&quot;">â€‹</a></h3><p>è¿™ä¸ª Symbol ç”¨äºåˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹ï¼Œç›®å‰ç”¨äº <code>instanceof</code> æ“ä½œç¬¦çš„é€»è¾‘ä¸­ã€‚</p><p>äº‹å®ä¸Šï¼Œåœ¨ä»»æ„ä¸€ä¸ªå‡½æ•°çš„åŸå‹é“¾ä¸Šï¼Œéƒ½æœ‰é»˜è®¤çš„ <code>Symbol.hasInstance</code> å±æ€§ï¼Œä¸‹é¢çš„ä»£ç å¯ä»¥è¯æ˜ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Animal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOwnPropertySymbols</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPrototypeOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Animal)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Symbol(Symbol.hasInstance)]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å¦‚æœæƒ³ä¿®æ”¹å…¶è¡Œä¸ºï¼Œä¸å¯ä»¥ç›´æ¥åœ¨ Animal ä¸Šèµ‹å€¼ï¼Œå› ä¸ºä¼šå†™åˆ°åŸå‹é“¾ä¸Šï¼Œè€ŒåŸå‹é“¾ä¸Šçš„è¿™ä¸ª <code>Symbol.hasInstance</code> å±æ€§æ˜¯åªè¯»çš„ã€‚åªå¯ä»¥åœ¨ Animal å¯¹è±¡æœ¬èº«ä¸Šå®šä¹‰ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defineProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Animal, Symbol.hasInstance, {</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¿®æ”¹ instanceof è¡Œä¸º</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ABC&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Animal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ›´ç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥ç”¨ <code>class</code> è¯­æ³•ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Animal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [Symbol.hasInstance](</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ— è®ºå¦‚ä½•ï¼Œè®°å¾— <strong>Symbol.hasInstance åº”å®šä¹‰åœ¨æ„é€ å‡½æ•°ä¸Šï¼Œè€Œä¸æ˜¯å¯¹è±¡å®ä¾‹ä¸Š</strong>ã€‚</p><blockquote><p>å…³äº instanceof çš„å®Œæ•´é€»è¾‘ï¼Œæˆ‘ä»¬åœ¨åé¢çš„ç« èŠ‚ä¸­è¿˜ä¼šè¯¦ç»†è®²åˆ°ã€‚</p></blockquote><h3 id="symbol-isconcatspreadable" tabindex="-1">Symbol.isConcatSpreadable <a class="header-anchor" href="#symbol-isconcatspreadable" aria-label="Permalink to &quot;Symbol.isConcatSpreadable&quot;">â€‹</a></h3><p>è¿™ä¸ª Symbol ç”¨äº Array çš„ <code>concat</code> å‡½æ•°ä¸­ã€‚å®ƒçš„è¡Œä¸ºæ¯”è¾ƒç‰¹æ®Šï¼Œè¿‡å»æˆ‘ä»¬åœ¨åˆå¹¶ä¸¤ä¸ªæ•°ç»„çš„æ—¶å€™ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [1,2,3,4]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¿™æ ·çš„ç»“æœæ˜¯æ¯«æ— äº‰è®®çš„ã€‚ç°åœ¨ <code>Symbol.isConcatSpreadable</code> çš„å¼•å…¥è®©ä¸Šé¢çš„ä»£ç æœ‰äº†å¦ä¸€ç§å¯èƒ½ï¼Œä¹Ÿå°±æ˜¯ä¸å±•å¼€å‚æ•°ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> arr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">arr[Symbol.isConcatSpreadable] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(arr) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [1,2,[3,4]]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>concat</code> ä¹Ÿå¯ä»¥ä¼ å…¥<strong>ç±»æ•°ç»„</strong>ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    length: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [Symbol.isConcatSpreadable]: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([].concat[obj]); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [[&quot;A&quot;,&quot;B&quot;]]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>åŒºåˆ«æ˜¯ï¼š<strong>concat ä¼ å…¥æ•°ç»„çš„æ—¶å€™ï¼Œé»˜è®¤å±•å¼€ï¼›ä½†æ˜¯ä¼ å…¥ç±»æ•°ç»„çš„æ—¶å€™ï¼Œé»˜è®¤ä¸å±•å¼€</strong>ã€‚å› æ­¤ï¼ŒSymbol.isConcatSpreadable æ›´å¤šçš„æ—¶å€™æ˜¯é’ˆå¯¹ä¼ å…¥éæ•°ç»„æ—¶å€™çš„è¡Œä¸ºå®šä¹‰ã€‚</p><h3 id="symbol-species" tabindex="-1">Symbol.species <a class="header-anchor" href="#symbol-species" aria-label="Permalink to &quot;Symbol.species&quot;">â€‹</a></h3><p>species å¸¦æœ‰â€œç‰©ç§â€çš„å«ä¹‰ã€‚è¿™ä¸ª Symbol çš„ç”¨å¤„æœ‰ä¸€äº›ç‰¹æ®Šï¼Œå¹¶ä¸å®¹æ˜“ç†è§£ã€‚è¿™æ ·è¯´å§ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªç±» Aï¼Œå®ƒæœ‰ä¸€äº›æ–¹æ³•ï¼Œæ¯”å¦‚ clone()ï¼Œæ­£å¸¸æ¥è¯´ä¹Ÿåº”è¯¥è¿”å›ä¸€ä¸ª A ç±»å‹çš„å¯¹è±¡ã€‚ä½†æ˜¯å‘¢ï¼Œ<code>Symbol.species</code> å¯ä»¥å£°æ˜ä½ è¿”å›çš„è¿™ä¸ªå¯¹è±¡æ˜¯ç”¨ A åˆ›å»ºï¼Œè¿˜æ˜¯ç”¨å…¶ä»–ä»»æ„æ„é€ å™¨æ¥åˆ›å»ºã€‚</p><p>æ³¨æ„ï¼Œ<code>Symbol.species</code> åªæ˜¯ç”¨æ¥å£°æ˜â€œåº”è¯¥â€ä½¿ç”¨çš„æ„é€ å™¨ï¼Œå…·ä½“ clone() æ€ä¹ˆæ‰§è¡Œï¼Œå®Œå…¨æ˜¯å¦ä¸€å›äº‹äº†ã€‚å› æ­¤å¯ä»¥è¯´ï¼Œ<code>Symbol.species</code> åŸºæœ¬åªä¼šå½±å“ä¸€äº›å†…ç½®çš„ç±»å‹ï¼Œæ¯”å¦‚ Arrayã€TypedArrayã€RegExpã€Promiseã€Mapã€Setã€ArrayBuffer ç­‰ç­‰ã€‚ä½†æ˜¯åŸåˆ™ä¸Šï¼Œå¦‚æœä½ å®šä¹‰çš„å¯¹è±¡ï¼Œé€šè¿‡æŸäº›æ–¹æ³•å¯ä»¥ç”Ÿæˆä¸€ä¸ªâ€œæ´¾ç”Ÿï¼ˆ<code>derived</code>ï¼Œä»£è¡¨æºäºå½“å‰å¯¹è±¡ç±»å‹çš„ï¼‰â€å¯¹è±¡ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡å¼•å…¥ <code>Symbol.species</code> æ¥å†³å®šè¯¥æ´¾ç”Ÿå¯¹è±¡è¯¥å¦‚ä½•åˆ›å»ºã€‚</p><p>å…ˆæ¥çœ‹å†…ç½®çš„ Array ç±»å‹ï¼Œå®ƒçš„ concatã€filterã€flatã€flatMapã€mapã€sliceã€splice æ–¹æ³•é»˜è®¤å‡è¿”å› Array ç±»å‹æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥æ”¹å˜è¿™ä¸€è¡Œä¸ºï¼Œä½†é¦–å…ˆæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ª Array çš„å­ç±»ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SizableArray</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [Symbol.species]() {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Array;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>é€šè¿‡å°† SizableArray çš„é™æ€å±æ€§ <code>[Symbol.species]</code> æŒ‡å‘ Arrayï¼Œé‚£ä¹ˆè°ƒç”¨ä¸Šè¿°ä»»ä¸€æ–¹æ³•ï¼Œè¿”å›çš„å¯¹è±¡å°†ä¸å†æ˜¯ SizableArray ç±»å‹ï¼Œè€Œæ˜¯ Arrayï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> arr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SizableArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sliced</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sliced.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Array</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ³¨æ„ï¼ŒArray ä¸Šé¢å¹¶éæ‰€æœ‰è¿”å› Array çš„æ–¹æ³•éƒ½å…·å¤‡æ­¤ç‰¹æ€§ï¼Œæ¯”å¦‚ sortã€reverseã€copyWithinï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½è¿”å›è°ƒç”¨æ•°ç»„æœ¬èº«ï¼Œå› æ­¤ä»ç„¶è¿”å›å½“å‰ç±»å‹çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ SizableArray è°ƒç”¨å®ƒä»¬ä¾ç„¶è¿”å› SizableArrayã€‚å†æ¯”å¦‚ <code>ES2023</code> æœ€æ–°å¼•å…¥çš„ toSortedã€toSplicedã€toReversedã€with æ–¹æ³•ï¼Œè™½ç„¶éƒ½è¿”å›æ–°çš„æ•°ç»„å®ä¾‹ï¼Œä½†æ˜¯ä¹Ÿä¸æ”¯æŒ <code>[Symbol.species]</code>ã€‚</p><blockquote><p>å’Œ Array éå¸¸ç±»ä¼¼çš„è¿˜æœ‰ <code>TypedArray</code>ï¼ŒæŒ‡é‚£äº› Int8Arrayã€Uint8Arrayã€Int32Arrayã€BigInt64Array è¿™ç±»å¯¹è±¡ã€‚</p></blockquote><p>ECMAScript è¿˜åœ¨å¦‚ä¸‹è¿™äº›å¯¹è±¡ç±»å‹ä¸Šä¹Ÿå®šä¹‰äº† <code>[Symbol.species]</code>ï¼š</p><div class="language-text vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1.  `Promise`ï¼Œå®ƒçš„ thenã€catchã€finally æ–¹æ³•éƒ½ä¼šå‚è€ƒ `[Symbol.species]` æ¥å†³å®šç”Ÿæˆçš„æ–° Promise çš„æ„é€ å‡½æ•°ï¼›</span></span>\n<span class="line"><span>2.  `ArrayBuffer`/`SharedArrayBuffer` çš„ slice æ–¹æ³•ï¼Œä¸ Array ç±»ä¼¼ï¼›</span></span>\n<span class="line"><span>3.  `RegExp` åŸå‹é“¾çš„ **Symbol.matchAll/split** æ–¹æ³•ï¼Œç”¨äºåœ¨ String è°ƒç”¨ matchAll/split æ—¶ï¼Œæ„é€ æŒ‡å®šçš„æ­£åˆ™å¯¹è±¡ï¼Œä¸¾ä¾‹æ¥è¯´ï¼š</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyReg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RegExp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;create MyReg&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">args);</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">args);</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [Symbol.species]() {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RegExp;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AB56CD78&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyReg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[A-Z]+&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;g&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>matchAll å’Œ split çš„ç‰¹æ®Šä¹‹å¤„åœ¨äºï¼Œ<strong>ä¼ å…¥ String å¯¹è±¡çš„è¿™ä¸¤ä¸ªæ–¹æ³•çš„æ­£åˆ™å‚æ•°å¹¶æ²¡æœ‰è¢«çœŸæ­£ä½¿ç”¨åˆ°ï¼Œè€Œæ˜¯åœ¨å†…éƒ¨åˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æ­£åˆ™å¯¹è±¡</strong>ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±ä¼šå‚è€ƒåˆ° <code>[Symbol.species]</code> æ¥æ„é€ äº†ã€‚</p><blockquote><p>å¤§å®¶ä¸å¦¨è¯•ä¸€è¯•ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>[Symbol.species]</code> è¿”å› RegExp æˆ–è€… MyRegï¼Œconsole.log éƒ½ä¼šæ‰“å°å‡ æ¬¡ã€‚</p></blockquote><p><code>Map</code> å’Œ <code>Set</code> ä¹Ÿéƒ½å®šä¹‰äº† <code>[Symbol.species]</code>ï¼Œä¸è¿‡ ECMAScript å†…éƒ¨å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°ï¼Œå¦‚æœä½ ç»§æ‰¿å®ƒä»¬åˆ›å»ºæ–°çš„ç±»ï¼Œé‚£ä¹ˆå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨å®ƒã€‚</p><h3 id="symbol-unscopables" tabindex="-1">Symbol.unscopables <a class="header-anchor" href="#symbol-unscopables" aria-label="Permalink to &quot;Symbol.unscopables&quot;">â€‹</a></h3><p>è¿™ä¸ª Symbol æ˜¯ä¸ºäº† <code>with</code> è€Œè®¾è®¡çš„ã€‚å®ƒæ˜¯ä¸€ä¸ª<strong>é»‘åå•</strong>ï¼Œè¢«æ ‡è®°çš„ key ä¸ä¼šä» with çš„å‚æ•°å¯¹è±¡ä¸­è·å–ï¼Œä»¥ MDN çš„ä¾‹å­æ¥è¯´æ˜å®ƒçš„ä½œç”¨ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  foo: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  bar: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj[Symbol.unscopables] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  foo: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  bar: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj) {</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(foo); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(bar); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ReferenceError: bar is not defined</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>é™¤äº†æå°‘æ•°ç‰¹æ®Šåœºæ™¯ä¹‹å¤–ï¼Œæˆ‘ä»¬å¾ˆéš¾ä¼šä½¿ç”¨åˆ°å®ƒï¼Œå†µä¸”åœ¨ strict æ¨¡å¼ä¸‹ä¹Ÿä¸å…è®¸ä½¿ç”¨ <code>with</code>ï¼Œå› æ­¤æˆ‘ä»¬å°±ä¸ç”¨è¿‡å¤šç¯‡å¹…è®²å®ƒäº†ã€‚</p><h2 id="å‘æŒ¥-symbol-çš„ä»·å€¼" tabindex="-1">å‘æŒ¥ Symbol çš„ä»·å€¼ <a class="header-anchor" href="#å‘æŒ¥-symbol-çš„ä»·å€¼" aria-label="Permalink to &quot;å‘æŒ¥ Symbol çš„ä»·å€¼&quot;">â€‹</a></h2><p>ä¸Šé¢æˆ‘ä»¬å­¦ä¹ äº†ä¸€éƒ¨åˆ† ECMAScript å†…ç½®çš„ Symbol å¸¸é‡ã€‚åœ¨å®šä¹‰äº†è¿™äº›å€¼çš„å˜é‡æˆ–è€…ç±»ä¸Šï¼Œæ€»ä¼šæœ‰ä¸ä¸€æ ·çš„è¡Œä¸ºå‡ºç°ã€‚</p><p>ä»”ç»†æ€è€ƒçš„è¯ï¼ŒSymbol å¸¸é‡åœ¨è¿™é‡Œé¢å‘æŒ¥çš„ä½œç”¨ï¼Œæ˜¯ä¸æ˜¯ç±»ä¼¼äº <code>Hook</code> å‡½æ•°å‘¢ï¼Ÿå¦‚æœè¿›ä¸€æ­¥å°è£…çš„è¯ï¼Œæ›´æœ‰ç±»ä¼¼äºé¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„ <code>interface</code> çš„æ„å‘³ï¼Œå³ä»»ä½•å¯¹è±¡ï¼ˆç±»ï¼‰åªè¦å®ç°äº†å¯¹åº”çš„ Symbol å±æ€§ï¼Œå°±å¯ä»¥è¢«åŠŸèƒ½æ¨¡å—æ‰€æ¶ˆè´¹ï¼Œè€Œä¸ç®¡è¿™ä¸ªå¯¹è±¡ï¼ˆç±»ï¼‰åˆ°åº•æ˜¯ä»€ä¹ˆä»¥åŠæ€ä¹ˆåˆ›å»ºçš„ã€‚</p><p>ä¸Šé¢æåˆ°çš„ String çš„ match/replace/split ç­‰æ–¹æ³•å°±æ˜¯æ­¤åœºæ™¯çš„å…¸å‹æ¡ˆä¾‹ï¼Œå®ƒå¯ä»¥ä¼ å…¥æ­£åˆ™ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥å®ç°äº†åˆ¶å®š Symbol å±æ€§çš„è‡ªå®šä¹‰å¯¹è±¡ã€‚ä¾ç…§æ­¤æ€è·¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾è®¡è‡ªå·±çš„åŸºäº Symbol çš„åŠŸèƒ½æ‹“å±•æ–¹å¼ã€‚</p><p>å‡è®¾æˆ‘ä»¬å®ç°äº†ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œæ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼ˆrequestï¼‰åï¼ŒæŒ‡æ´¾ç»™ä»»æ„ä¸ªå¤„ç†å™¨ï¼ˆhandlerï¼‰ã€‚å¤„ç†å™¨çš„é€»è¾‘é€šå¸¸ç”±å¼€å‘è€…æ¥æ‹“å±•å®ç°ã€‚æŒ‰ç…§ä»¥å¾€çš„æ€è·¯ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Handler ç±»ï¼Œå¼€å‘è€…ç»§æ‰¿å®ƒå®ç°æ´¾ç”Ÿç±»ï¼Œå®ä¾‹åŒ–ä¹‹åå†ä¼ é€’ç»™ HTTPServerï¼š</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    abstract</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTTPServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    handleRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">handler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        handler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ç°åœ¨æˆ‘ä»¬å¤šäº†ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä½¿ç”¨ Symbol æ¥ä»£æ›¿æŠ½è±¡ç±»ï¼š</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> handlerSymbol</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HttpHandler&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTTPServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    handleRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">handler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { [handlerSymbol](</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }) {</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        handler[handlerSymbol](</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>è¿™æ ·çš„è¯ï¼Œå¼€å‘è€…åœ¨å®ç° handler æ–¹é¢ä¼šæ›´çµæ´»ï¼Œè™½ç„¶ä¾ç„¶éœ€è¦å¼•ç”¨ HTTPServer æä¾›çš„ Symbol å€¼ï¼Œä½†æ˜¯æ¶ˆé™¤äº†ç±»çš„ç»§æ‰¿ï¼Œå¯ä»¥ä»¥ä»»æ„æ–¹å¼åˆ›å»ºå¯¹è±¡ï¼Œä¹Ÿä¸å¿…å—åˆ°å•ç»§æ‰¿çš„é™åˆ¶ã€‚</p><p>è¿™ä¸ªè®¾è®¡åˆ©ç”¨çš„å°±æ˜¯ Symbol <strong>å”¯ä¸€å€¼</strong>çš„ç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ çš„è‡ªå®šä¹‰å¯¹è±¡çš„å±æ€§å†æ€æ ·ï¼Œä¹Ÿä¸ä¼šå’Œè¿™ä¸ªé¢„è®¾å€¼å†²çªã€‚</p><p>è¿™ä¸ªç‰¹æ€§ä¹Ÿå¸¸å¸¸ç”¨åœ¨å”¯ä¸€æ€§æ•°æ®çš„å­˜å‚¨ä¸Šï¼Œæ¯”å¦‚ Mapã€Set ç­‰æ•°æ®ç»“æ„ï¼Œéƒ½æ”¯æŒå‚¨å­˜ Symbol æˆ–ä»¥ Symbol ä¸º keyã€‚</p><blockquote><p><code>WeakSet</code>ã€<code>WeakMap</code> å¯¹ Symbol çš„æ”¯æŒå­˜åœ¨æµè§ˆå™¨ä¸Šçš„å·®å¼‚æ€§ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚</p></blockquote><h2 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">â€‹</a></h2><p>Symbol åœ¨<strong>å€¼å”¯ä¸€</strong>è¿™ä¸ªç‰¹æ€§ä¸Šçš„ä½œç”¨èƒ½å¤Ÿæ”¯æ’‘æˆ‘ä»¬å†™å‡ºæ›´åŠ å¥å£®çš„ä»£ç ï¼Œä¸è¿‡ä¹Ÿè¦æ³¨æ„å®ƒé»˜è®¤æ— æ³•å‚ä¸å­—ç¬¦ä¸²å’Œæ•°å­—è½¬æ¢çš„çš„ç‰¹å¾ï¼Œä½œä¸ºå¯¹è±¡çš„ key ä¹Ÿå¾ˆéš¾éå†å¾—åˆ°ï¼Œé¿å…çŠ¯ä¸‹ä½çº§é”™è¯¯ã€‚</p><p>Symbol å®šä¹‰äº†å¾ˆå¤š<strong>é™æ€å¸¸é‡</strong>ï¼Œèƒ½å¤Ÿé»˜é»˜å½±å“åˆ°è®¸å¤šç­–ç•¥ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²æœç´¢åŒ¹é…ã€instanceofã€with ç­‰ç­‰ã€‚è¿™ç§æ¨¡å¼æ›´åƒæ˜¯ä¸€ç§é’©å­ï¼ˆHooksï¼‰èŒƒå¼ï¼Œèƒ½å¤Ÿå®ç°ä¸ä¾èµ–ç±»ç»§æ‰¿çš„èƒ½åŠ›æ‹“å±•ã€‚</p><p>å¸Œæœ›å¤§å®¶èƒ½å–„äºä½¿ç”¨ Symbolï¼Œå……åˆ†åˆ©ç”¨å…¶å”¯ä¸€æ€§å’Œé™æ€å¸¸é‡æ¥ä¼˜åŒ–æ‰€ç¼–å†™ä»£ç çš„å¥å£®æ€§å’Œçµæ´»æ€§ã€‚</p><p>å½“ç„¶ Symbol çš„æ•…äº‹è¿˜æ²¡æœ‰å®Œï¼Œæœ‰å‡ ä¸ªé™æ€å¸¸é‡å¦‚ Symbol.toStringTagã€Symbol.toPrimitiveã€Symbol.iteratorã€Symbol.asyncIteratorï¼Œè¿˜æœ‰æ›´é‡è¦çš„ä»»åŠ¡ã€‚</p><p>ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬æ¥èŠèŠæ•°ç»„ã€‚</p>',98)]))}]]);export{l as __pageData,e as default};
